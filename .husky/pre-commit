echo "â¡ï¸  Running pre-commit checks: ESLint + Prettier via lint-staged"

# 1) Jalankan Lint-Staged (ESLint + Prettier)
if pnpm -s lint-staged; then
	echo "âœ…  pre-commit: lint-staged passed"
else
	echo "âŒ  pre-commit: lint-staged failed â€” please fix the issues above and try again"
	exit 1
fi

# 2) Tambahan: Paksa Prettier write untuk berjaga jika ada file di luar globs lint-staged
echo "ğŸ–‹   Running Prettier format on all supported files..."
npx prettier --write . || {
	echo "âŒ  Prettier formatting failed"
	exit 1
}

echo "ğŸ‰  Pre-Commit checks completed successfully!"
echo "â„¹ï¸  You can run 'pnpm run format' and 'pnpm run lint' locally to reproduce checks."
